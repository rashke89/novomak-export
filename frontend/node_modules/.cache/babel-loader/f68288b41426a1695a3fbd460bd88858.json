{"ast":null,"code":"var _jsxFileName = \"/Users/radosmijatovic/projects/novomak-export/frontend/src/screens/CategoriesScreen.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport { saveProduct, listProducts, deleteProdcut } from '../actions/productActions';\nimport { listCategories, saveCategory } from \"../actions/categoryAction\";\n\nfunction CategoriesScreen(props) {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [id, setId] = useState('');\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState('');\n  const [image, setImage] = useState('');\n  const [brand, setBrand] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('categories');\n  const [countInStock, setCountInStock] = useState('');\n  const [description, setDescription] = useState('');\n  const [uploading, setUploading] = useState(false); // const categoryList = useSelector((state) => state.categoryList);\n  // const { loading, categories, error } = categoryList;\n\n  const {\n    categories,\n    diameters,\n    manufacturers,\n    heights,\n    widths,\n    seasons\n  } = useSelector(state => state.categoryList.categories);\n  const [renderList, setRenderList] = useState(categories);\n  const productSave = useSelector(state => state.productSave);\n  const {\n    loading: loadingSave,\n    success: successSave,\n    error: errorSave\n  } = productSave;\n  const productDelete = useSelector(state => state.productDelete);\n  const {\n    loading: loadingDelete,\n    success: successDelete,\n    error: errorDelete\n  } = productDelete;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (successSave) {\n      setModalVisible(false);\n    }\n\n    dispatch(listCategories());\n    console.log(categories);\n    setRenderList(categories);\n    return () => {//\n    };\n  }, [successSave, successDelete]);\n  useEffect(() => {\n    setRenderList(categories);\n    return () => {//\n    };\n  }, [categories]);\n\n  const openModal = product => {\n    // setModalVisible(true);\n    // setId(product._id);\n    setName(product.name); // setPrice(product.price);\n    // setDescription(product.description);\n    // setImage(product.image);\n    // setBrand(product.brand);\n    // setCategory(product.category);\n    // setCountInStock(product.countInStock);\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(saveCategory({\n      _id: id,\n      name,\n      image,\n      description\n    }));\n  };\n\n  const deleteHandler = product => {\n    dispatch(deleteProdcut(product._id));\n  };\n\n  const uploadFileHandler = e => {\n    const file = e.target.files[0];\n    console.log(file);\n    const bodyFormData = new FormData();\n    bodyFormData.append('xml', file);\n    console.log(bodyFormData);\n    setUploading(true);\n    axios.post('/api/xml', bodyFormData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(response => {\n      console.log('uploadovan XML...', response);\n      setImage(response.data);\n      setUploading(false);\n    }).catch(err => {\n      console.log(err);\n      setUploading(false);\n    });\n  };\n\n  const onChoseCategory = categoryName => {\n    console.log(categoryName);\n    setSelectedCategory(categoryName);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content content-margined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-header mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"nav header-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    onClick: e => onChoseCategory('categories'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: `'nav-link' ${selectedCategory === 'categories' && 'active'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 19\n    }\n  }, \"Kategorije\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    onClick: e => onChoseCategory('manufacturers'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"nav-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, \"Proizvodjaci\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    onClick: e => onChoseCategory('seasons'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"nav-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 19\n    }\n  }, \"Sezone\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    onClick: e => onChoseCategory('widths'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"nav-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 19\n    }\n  }, \"Sirina\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    onClick: e => onChoseCategory('heights'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"nav-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }\n  }, \"Visina\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    onClick: e => onChoseCategory('diameters'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"nav-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 19\n    }\n  }, \"Precnik\"))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#exampleModal\",\n    onClick: openModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, \"Kreiraj kategoriju\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal fade bd-example-modal-lg\",\n    id: \"exampleModal\",\n    tabIndex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog\",\n    role: \"document\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"modal-title\",\n    id: \"exampleModalLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }, \"Kreiraj kategoriju\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }\n  }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 41\n    }\n  }, \"Ime\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    value: name,\n    id: \"name\",\n    onChange: e => setName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 41\n    }\n  }, \"Slika\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"image\",\n    value: image,\n    id: \"image\",\n    onChange: e => setImage(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"w-100\",\n    onChange: uploadFileHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 41\n    }\n  }), uploading && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 55\n    }\n  }, \"Uploading...\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 37\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    id: \"close-modal-btn\",\n    \"data-dismiss\": \"modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 25\n    }\n  }, \"Odustani\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    onClick: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 25\n    }\n  }, id ? 'Izmeni' : 'Kreiraj'))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 15\n    }\n  }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 15\n    }\n  }, \"Ime\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 11\n    }\n  }, renderList === null || renderList === void 0 ? void 0 : renderList.map(product => /*#__PURE__*/React.createElement(\"tr\", {\n    key: product._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"align-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 17\n    }\n  }, product._id), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 17\n    }\n  }, product.name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#exampleModal\",\n    className: \"button\",\n    onClick: () => openModal(product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 19\n    }\n  }, \"Edit\"), ' ', /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button\",\n    onClick: () => deleteHandler(product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 19\n    }\n  }, \"Delete\"))))))));\n}\n\nexport default CategoriesScreen;","map":{"version":3,"sources":["/Users/radosmijatovic/projects/novomak-export/frontend/src/screens/CategoriesScreen.js"],"names":["React","useEffect","useState","useSelector","useDispatch","axios","saveProduct","listProducts","deleteProdcut","listCategories","saveCategory","CategoriesScreen","props","modalVisible","setModalVisible","id","setId","name","setName","price","setPrice","image","setImage","brand","setBrand","selectedCategory","setSelectedCategory","countInStock","setCountInStock","description","setDescription","uploading","setUploading","categories","diameters","manufacturers","heights","widths","seasons","state","categoryList","renderList","setRenderList","productSave","loading","loadingSave","success","successSave","error","errorSave","productDelete","loadingDelete","successDelete","errorDelete","dispatch","console","log","openModal","product","submitHandler","e","preventDefault","_id","deleteHandler","uploadFileHandler","file","target","files","bodyFormData","FormData","append","post","headers","then","response","data","catch","err","onChoseCategory","categoryName","value","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport {\n  saveProduct,\n  listProducts,\n  deleteProdcut,\n} from '../actions/productActions';\nimport {listCategories, saveCategory} from \"../actions/categoryAction\";\n\nfunction CategoriesScreen(props) {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [id, setId] = useState('');\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState('');\n  const [image, setImage] = useState('');\n  const [brand, setBrand] = useState('');\n\n  const [selectedCategory, setSelectedCategory] = useState('categories');\n  const [countInStock, setCountInStock] = useState('');\n  const [description, setDescription] = useState('');\n  const [uploading, setUploading] = useState(false);\n  // const categoryList = useSelector((state) => state.categoryList);\n  // const { loading, categories, error } = categoryList;\n    const {categories, diameters, manufacturers, heights, widths, seasons} = useSelector((state) => state.categoryList.categories);\n    const [renderList, setRenderList] = useState(categories);\n\n  const productSave = useSelector((state) => state.productSave);\n  const {\n    loading: loadingSave,\n    success: successSave,\n    error: errorSave,\n  } = productSave;\n\n  const productDelete = useSelector((state) => state.productDelete);\n  const {\n    loading: loadingDelete,\n    success: successDelete,\n    error: errorDelete,\n  } = productDelete;\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (successSave) {\n      setModalVisible(false);\n    }\n    dispatch(listCategories());\n      console.log(categories);\n      setRenderList(categories);\n    return () => {\n      //\n    };\n  }, [successSave, successDelete]);\n\n  useEffect(() => {\n      setRenderList(categories);\n    return () => {\n      //\n    };\n  }, [categories]);\n\n  const openModal = (product) => {\n    // setModalVisible(true);\n    // setId(product._id);\n    setName(product.name);\n    // setPrice(product.price);\n    // setDescription(product.description);\n    // setImage(product.image);\n    // setBrand(product.brand);\n    // setCategory(product.category);\n    // setCountInStock(product.countInStock);\n  };\n  const submitHandler = (e) => {\n    e.preventDefault();\n     dispatch(\n         saveCategory({\n        _id: id,\n        name,\n        image,\n        description,\n      })\n    );\n  };\n  const deleteHandler = (product) => {\n    dispatch(deleteProdcut(product._id));\n  };\n  const uploadFileHandler = (e) => {\n    const file = e.target.files[0];\n      console.log(file);\n      const bodyFormData = new FormData();\n    bodyFormData.append('xml', file);\n      console.log(bodyFormData);\n      setUploading(true);\n    axios\n      .post('/api/xml', bodyFormData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      })\n      .then((response) => {\n          console.log('uploadovan XML...', response);\n          setImage(response.data);\n        setUploading(false);\n      })\n      .catch((err) => {\n        console.log(err);\n        setUploading(false);\n      });\n  };\n  const onChoseCategory = (categoryName) => {\n      console.log(categoryName);\n      setSelectedCategory(categoryName);\n  }\n  return (\n    <div className=\"content content-margined\">\n      <div className=\"product-header mb-4\">\n        {/*<h3>Kategorije</h3>*/}\n          <ul className=\"nav header-list\">\n              <li className=\"nav-item\" onClick={e => onChoseCategory('categories')}>\n                  <span className={`'nav-link' ${selectedCategory === 'categories' && 'active'}`}>Kategorije</span>\n              </li>\n              <li className=\"nav-item\" onClick={e => onChoseCategory('manufacturers')}>\n                  <span className=\"nav-link\">Proizvodjaci</span>\n              </li>\n              <li className=\"nav-item\" onClick={e => onChoseCategory('seasons')}>\n                  <span className=\"nav-link\" >Sezone</span>\n              </li>\n              <li className=\"nav-item\" onClick={e => onChoseCategory('widths')}>\n                  <span className=\"nav-link\">Sirina</span>\n              </li>\n              <li className=\"nav-item\" onClick={e => onChoseCategory('heights')}>\n                  <span className=\"nav-link\">Visina</span>\n              </li>\n              <li className=\"nav-item\" onClick={e => onChoseCategory('diameters')}>\n                  <span className=\"nav-link\">Precnik</span>\n              </li>\n          </ul>\n        <button type=\"button\" className=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#exampleModal\" onClick={openModal}>\n          Kreiraj kategoriju\n        </button>\n      </div>\n\n        <div className=\"modal fade bd-example-modal-lg\" id=\"exampleModal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n            <div className=\"modal-dialog\" role=\"document\">\n                <div className=\"modal-content\">\n                    <div className=\"modal-header\">\n                        <h2 className=\"modal-title\" id=\"exampleModalLabel\">Kreiraj kategoriju</h2>\n                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                    </div>\n                    <div className=\"modal-body\">\n                        <div className=\"form-modal\">\n                            <form onSubmit={submitHandler}>\n                                <div className=\"row\">\n                                    <div className=\"col-md-6\">\n                                        <label htmlFor=\"name\">Ime</label>\n                                        <input\n                                            type=\"text\"\n                                            name=\"name\"\n                                            value={name}\n                                            id=\"name\"\n                                            onChange={(e) => setName(e.target.value)}\n                                        />\n                                        {/*<label htmlFor=\"price\">Cena</label>*/}\n                                        {/*<input*/}\n                                        {/*    type=\"text\"*/}\n                                        {/*    name=\"price\"*/}\n                                        {/*    value={price}*/}\n                                        {/*    id=\"price\"*/}\n                                        {/*    onChange={(e) => setPrice(e.target.value)}*/}\n                                        {/*/>*/}\n                                        <label htmlFor=\"image\">Slika</label>\n                                        <input\n                                            type=\"text\"\n                                            name=\"image\"\n                                            value={image}\n                                            id=\"image\"\n                                            onChange={(e) => setImage(e.target.value)}\n                                        />\n                                        <input type=\"file\"\n                                               className=\"w-100\"\n                                               onChange={uploadFileHandler}/>\n                                        {uploading && <div>Uploading...</div>}\n                                        {/*<label htmlFor=\"brand\">Brend</label>*/}\n                                        {/*<input*/}\n                                        {/*    type=\"text\"*/}\n                                        {/*    name=\"brand\"*/}\n                                        {/*    value={brand}*/}\n                                        {/*    id=\"brand\"*/}\n                                        {/*    onChange={(e) => setBrand(e.target.value)}*/}\n                                        {/*/>*/}\n                                    </div>\n                                    <div className=\"col-md-6\">\n\n                                        {/*<label htmlFor=\"countInStock\">Broj raspolozivih jedinica</label>*/}\n                                        {/*<input*/}\n                                        {/*    type=\"text\"*/}\n                                        {/*    name=\"countInStock\"*/}\n                                        {/*    value={countInStock}*/}\n                                        {/*    id=\"countInStock\"*/}\n                                        {/*    onChange={(e) => setCountInStock(e.target.value)}*/}\n                                        {/*/>*/}\n                                        {/*<label htmlFor=\"name\">Kategorija</label>*/}\n                                        {/*<input*/}\n                                        {/*    type=\"text\"*/}\n                                        {/*    name=\"category\"*/}\n                                        {/*    value={category}*/}\n                                        {/*    id=\"category\"*/}\n                                        {/*    onChange={(e) => setCategory(e.target.value)}*/}\n                                        {/*/>*/}\n                                        {/*<label htmlFor=\"description\">Opis</label>*/}\n                                        {/*<textarea*/}\n                                        {/*    name=\"description\"*/}\n                                        {/*    value={description}*/}\n                                        {/*    id=\"description\"*/}\n                                        {/*    className=\"w-100\"*/}\n                                        {/*    rows={6}*/}\n                                        {/*    onChange={(e) => setDescription(e.target.value)}*/}\n                                        {/*/>*/}\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                    <div className=\"modal-footer\">\n                        <button type=\"button\" className=\"btn btn-secondary\" id=\"close-modal-btn\" data-dismiss=\"modal\">Odustani</button>\n                        <button type=\"submit\" className=\"btn btn-primary\" onClick={submitHandler}>\n                            {id ? 'Izmeni' : 'Kreiraj'}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        {<div className=\"product-list\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Ime</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {renderList?.map((product) => (\n              <tr key={product._id}>\n                <td className=\"align-center\">{product._id}</td>\n                <td>{product.name}</td>\n                <td>\n                  <button type=\"button\" data-toggle=\"modal\" data-target=\"#exampleModal\" className=\"button\" onClick={() => openModal(product)}>\n                    Edit\n                  </button>{' '}\n                  <button\n                    className=\"button\"\n                    onClick={() => deleteHandler(product)}\n                  >\n                    Delete\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>}\n    </div>\n  );\n}\nexport default CategoriesScreen;\n"]},"metadata":{},"sourceType":"module"}