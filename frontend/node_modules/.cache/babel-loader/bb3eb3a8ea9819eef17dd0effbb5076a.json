{"ast":null,"code":"var _jsxFileName = \"/Users/radosmijatovic/projects/novomak-export/frontend/src/screens/HeaderScreen.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios, { AxiosInstance as Axios } from 'axios';\nimport { saveProduct, listProducts, deleteProdcut } from '../actions/productActions';\nimport { deleteCategory, listCategories, saveCategory } from \"../actions/categoryAction\";\nimport { CATEGORY_SAVE_REQUEST } from \"../constants/categoryConstants\";\n\nfunction HeaderScreen(props) {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [id, setId] = useState('');\n  const [text, setText] = useState('');\n  const [button, setButton] = useState('');\n  const [position, setPosition] = useState('0');\n  const [image, setImage] = useState('');\n  const [headers, setHeaders] = useState([]);\n  const [selectedHeader, setSelectedHeader] = useState([]);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    // if (successSave) {\n    //     setModalVisible(false);\n    // }\n    listHeaders();\n    return () => {//\n    };\n  }, []);\n\n  const handlePosition = e => {\n    setPosition(e.target.value);\n  };\n\n  const listHeaders = () => {\n    axios.get(`/api/users/header`).then(data => {\n      console.log('stigli headeriiiii', data);\n      setHeaders(data.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const openModal = product => {\n    setText(product.text);\n    setButton(product.button);\n    setPosition(product.position);\n    setId(product._id); // if (product?.discount)\n    //     setDiscount(product.discount);\n    // else\n    //     setDiscount('')\n  };\n\n  const uploadFileHandler = e => {\n    const file = e.target.files[0];\n    const bodyFormData = new FormData();\n    bodyFormData.append('image', file);\n    axios.post('/api/uploads/header', bodyFormData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(response => {\n      setImage(response.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    let headerBody = {\n      text,\n      button,\n      position,\n      id,\n      image\n    };\n    console.log(headerBody);\n    axios.post(`/api/users/header`, headerBody).then(data => {\n      console.log('kreiran header....', data);\n      document.querySelector(\".close\").click();\n      listHeaders();\n    }).catch(error => {\n      console.log(error);\n    }); // dispatch(\n    //     saveCategory({\n    //         _id: id,\n    //         selectedCategory,\n    //         name,\n    //         discount\n    //     })\n    // );\n  }; // const deleteHandler = (product) => {\n  //     dispatch(deleteCategory({id: product._id, selectedCategory}));\n  // };\n  // const onChoseCategory = (categoryName) => {\n  //     setRenderList(categoryList[categoryName])\n  //     setSelectedCategory(categoryName);\n  // }\n\n\n  const deleteHandler = product => {\n    console.log(product);\n    axios.delete(`/api/users/header/${product._id}`).then(data => {\n      console.log('obrisan header...', data);\n      listHeaders();\n    }).catch(error => {\n      console.log('greska u brisanju headera', error);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content content-margined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-header mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, \"Headers\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#exampleModal\",\n    onClick: e => openModal({\n      text: '',\n      position: '',\n      button: '',\n      id: ''\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, \"Kreiraj kategoriju\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal fade bd-example-modal-lg headers-modal\",\n    id: \"exampleModal\",\n    tabIndex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog\",\n    role: \"document\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"modal-title\",\n    id: \"exampleModalLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 29\n    }\n  }, \"Kreiraj kategoriju\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 33\n    }\n  }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `col-md-6`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 45\n    }\n  }, \"Text\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    value: text,\n    id: \"name\",\n    onChange: e => setText(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 45\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"brand\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 45\n    }\n  }, \"Dugme text\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"brand\",\n    value: button,\n    id: \"brand\",\n    onChange: e => setButton(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 45\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"brand\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 45\n    }\n  }, \"Pozicija\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"position\",\n    value: position,\n    onChange: handlePosition,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 49\n    }\n  }, \"Levo\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 49\n    }\n  }, \"Desno\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 45\n    }\n  }, \"Slika\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"image\",\n    value: image,\n    id: \"image\",\n    onChange: e => setImage(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"w-100\",\n    onChange: uploadFileHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 45\n    }\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    id: \"close-modal-btn\",\n    \"data-dismiss\": \"modal\",\n    onClick: e => {\n      dispatch({\n        type: CATEGORY_SAVE_REQUEST,\n        payload: ''\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 29\n    }\n  }, \"Odustani\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    onClick: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 29\n    }\n  }, id ? 'Izmeni' : 'Kreiraj'))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-list headers-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 25\n    }\n  }, \"Text\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 25\n    }\n  }, \"Dugme text\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 25\n    }\n  }, \"Pozicija\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  }, \"Slika\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 21\n    }\n  }, headers === null || headers === void 0 ? void 0 : headers.map(product => /*#__PURE__*/React.createElement(\"tr\", {\n    key: product._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 29\n    }\n  }, product.text), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 29\n    }\n  }, product.button), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 29\n    }\n  }, product.position), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `${product.image}`,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#exampleModal\",\n    className: \"button\",\n    onClick: () => openModal(product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 33\n    }\n  }, \"Edit\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button\",\n    onClick: () => deleteHandler(product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 33\n    }\n  }, \"Delete\"))))))));\n}\n\nexport default HeaderScreen;","map":{"version":3,"sources":["/Users/radosmijatovic/projects/novomak-export/frontend/src/screens/HeaderScreen.js"],"names":["React","useEffect","useState","useSelector","useDispatch","axios","AxiosInstance","Axios","saveProduct","listProducts","deleteProdcut","deleteCategory","listCategories","saveCategory","CATEGORY_SAVE_REQUEST","HeaderScreen","props","modalVisible","setModalVisible","id","setId","text","setText","button","setButton","position","setPosition","image","setImage","headers","setHeaders","selectedHeader","setSelectedHeader","dispatch","listHeaders","handlePosition","e","target","value","get","then","data","console","log","catch","error","openModal","product","_id","uploadFileHandler","file","files","bodyFormData","FormData","append","post","response","err","submitHandler","preventDefault","headerBody","document","querySelector","click","deleteHandler","delete","type","payload","map"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\nimport axios, {AxiosInstance as Axios} from 'axios';\nimport {\n    saveProduct,\n    listProducts,\n    deleteProdcut,\n} from '../actions/productActions';\nimport {deleteCategory, listCategories, saveCategory} from \"../actions/categoryAction\";\nimport {CATEGORY_SAVE_REQUEST} from \"../constants/categoryConstants\";\n\nfunction HeaderScreen(props) {\n    const [modalVisible, setModalVisible] = useState(false);\n    const [id, setId] = useState('');\n    const [text, setText] = useState('');\n    const [button, setButton] = useState('');\n    const [position, setPosition] = useState('0');\n    const [image, setImage] = useState('');\n    const [headers, setHeaders] = useState([]);\n    const [selectedHeader, setSelectedHeader] = useState([]);\n    const dispatch = useDispatch();\n    useEffect(() => {\n        // if (successSave) {\n        //     setModalVisible(false);\n        // }\n        listHeaders()\n        return () => {\n            //\n        };\n    }, []);\n    const handlePosition = (e) => {\n        setPosition(e.target.value);\n    };\n\n    const listHeaders = () => {\n        axios.get(`/api/users/header`)\n            .then(data => {\n                console.log('stigli headeriiiii', data);\n                setHeaders(data.data)\n            })\n            .catch(error => {\n                console.log(error);\n            })\n    };\n    const openModal = (product) => {\n        setText(product.text);\n        setButton(product.button);\n        setPosition(product.position);\n        setId(product._id);\n        // if (product?.discount)\n        //     setDiscount(product.discount);\n        // else\n        //     setDiscount('')\n    };\n    const uploadFileHandler = (e) => {\n        const file = e.target.files[0];\n        const bodyFormData = new FormData();\n        bodyFormData.append('image', file);\n        axios\n            .post('/api/uploads/header', bodyFormData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                },\n            })\n            .then((response) => {\n                setImage(response.data);\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    };\n    const submitHandler = (e) => {\n        e.preventDefault();\n        let headerBody = {text, button, position, id, image};\n        console.log(headerBody);\n        axios.post(`/api/users/header`, headerBody)\n            .then(data => {\n                console.log('kreiran header....', data);\n                document.querySelector(\".close\").click();\n                listHeaders()\n            })\n            .catch(error => {\n                console.log(error);\n            })\n        // dispatch(\n        //     saveCategory({\n        //         _id: id,\n        //         selectedCategory,\n        //         name,\n        //         discount\n        //     })\n        // );\n    };\n    // const deleteHandler = (product) => {\n    //     dispatch(deleteCategory({id: product._id, selectedCategory}));\n    // };\n    // const onChoseCategory = (categoryName) => {\n    //     setRenderList(categoryList[categoryName])\n    //     setSelectedCategory(categoryName);\n    // }\n    const deleteHandler = (product) => {\n        console.log(product);\n        axios.delete(`/api/users/header/${product._id}`)\n            .then(data => {\n                console.log('obrisan header...',data);\n                listHeaders();\n            })\n            .catch(error => {\n                console.log('greska u brisanju headera', error);\n            })\n    }\n\n    return (\n        <div className=\"content content-margined\">\n            <div className=\"product-header mb-4\">\n                <h3>Headers</h3>\n                <button type=\"button\" className=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#exampleModal\" onClick={e => openModal({text: '', position: '', button: '', id: ''})}>\n                    Kreiraj kategoriju\n                </button>\n            </div>\n\n            <div className=\"modal fade bd-example-modal-lg headers-modal\" id=\"exampleModal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                <div className=\"modal-dialog\" role=\"document\">\n                    <div className=\"modal-content\">\n                        <div className=\"modal-header\">\n                            <h2 className=\"modal-title\" id=\"exampleModalLabel\">Kreiraj kategoriju</h2>\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                            <div className=\"form-modal\">\n                                <form onSubmit={submitHandler}>\n                                    <div className=\"row\">\n                                        <div className={`col-md-6`}>\n                                            <label htmlFor=\"name\">Text</label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"name\"\n                                                value={text}\n                                                id=\"name\"\n                                                onChange={(e) => setText(e.target.value)}\n                                            />\n\n                                        </div>\n                                        <div className=\"col-md-6\">\n                                            <label htmlFor=\"brand\">Dugme text</label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"brand\"\n                                                value={button}\n                                                id=\"brand\"\n                                                onChange={(e) => setButton(e.target.value)}\n                                            ></input>\n                                        </div>\n                                        <div className=\"col-md-6\">\n                                            <label htmlFor=\"brand\">Pozicija</label>\n                                            <select name=\"position\" value={position} onChange={handlePosition}>\n                                                <option value=\"0\">Levo</option>\n                                                <option value=\"1\">Desno</option>\n                                            </select>\n                                        </div>\n                                        <div className=\"col-md-6\">\n                                            <label htmlFor=\"image\">Slika</label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"image\"\n                                                value={image}\n                                                id=\"image\"\n                                                onChange={(e) => setImage(e.target.value)}\n                                            ></input>\n                                            <input type=\"file\"\n                                                   className=\"w-100\"\n                                                   onChange={uploadFileHandler}></input>\n                                        </div>\n                                        {/*<div className=\"col-md-12\">*/}\n                                        {/*    {categorySave && categorySave.hasOwnProperty('loading') && !categorySave.loading && <div className=\"col-md-12 mt-3\">*/}\n                                        {/*        <p className={!categorySave?.success ? 'error-text p-3' : 'success-text p-3'}>*/}\n                                        {/*            [STATUS] {id ? 'izmena' : 'kreiranje'} kategorije: {categorySave?.category?.message}*/}\n                                        {/*        </p>*/}\n                                        {/*    </div>}*/}\n                                        {/*</div>*/}\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                        <div className=\"modal-footer\">\n                            <button type=\"button\" className=\"btn btn-secondary\" id=\"close-modal-btn\" data-dismiss=\"modal\" onClick={e => {\n                                dispatch({type: CATEGORY_SAVE_REQUEST, payload: ''});\n                            }}>Odustani</button>\n                            <button type=\"submit\" className=\"btn btn-primary\" onClick={submitHandler}>\n                                {id ? 'Izmeni' : 'Kreiraj'}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {<div className=\"product-list headers-list\">\n                <table className=\"table\">\n                    <thead>\n                    <tr>\n                        <th>Text</th>\n                        <th>Dugme text</th>\n                        <th>Pozicija</th>\n                        <th>Slika</th>\n                        <th></th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {headers?.map((product) => (\n                        <tr key={product._id}>\n                            <td>{product.text}</td>\n                            <td>{product.button}</td>\n                            <td>{product.position}</td>\n                            <td>\n                                <img src={`${product.image}`} alt=\"\"/>\n                            </td>\n                            <td>\n                                <button type=\"button\" data-toggle=\"modal\" data-target=\"#exampleModal\" className=\"button\" onClick={() => openModal(product)}>\n                                    Edit\n                                </button>\n                                <button\n                                    className=\"button\"\n                                    onClick={() => deleteHandler(product)}\n                                >\n                                    Delete\n                                </button>\n                            </td>\n                        </tr>\n                    ))}\n                    </tbody>\n                </table>\n            </div>}\n        </div>\n    );\n}\n\nexport default HeaderScreen;\n"]},"metadata":{},"sourceType":"module"}