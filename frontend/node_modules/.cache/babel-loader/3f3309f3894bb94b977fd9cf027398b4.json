{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\gume\\\\novomak-export\\\\frontend\\\\src\\\\screens\\\\ProductScreen.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { detailsProduct, saveProductReview } from '../actions/productActions';\nimport Rating from '../components/Rating';\nimport { PRODUCT_REVIEW_SAVE_RESET } from '../constants/productConstants';\nimport { addToCart } from \"../actions/cartActions\";\n\nfunction ProductScreen(props) {\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  const userSignin = useSelector(state => state.userSignin);\n  const {\n    userInfo\n  } = userSignin;\n  const productDetails = useSelector(state => state.productDetails);\n  const {\n    product,\n    loading,\n    error\n  } = productDetails;\n  const productReviewSave = useSelector(state => state.productReviewSave);\n  const {\n    success: productSaveSuccess\n  } = productReviewSave;\n  const {\n    categories\n  } = useSelector(state => state.categoryList.categories);\n  const [hasAction, setHesAction] = useState(false);\n  const dispatch = useDispatch();\n  let history = useHistory();\n  useEffect(() => {\n    if (productSaveSuccess) {\n      alert('Review submitted successfully.');\n      setRating(0);\n      setComment('');\n      dispatch({\n        type: PRODUCT_REVIEW_SAVE_RESET\n      });\n    }\n\n    let options = {\n      behavior: 'smooth'\n    };\n    setTimeout(() => {\n      document.getElementsByClassName('header')[0].scrollIntoView(options);\n    }, 500);\n    dispatch(detailsProduct(props.match.params.id));\n    return () => {//\n    };\n  }, [productSaveSuccess]);\n  useEffect(() => {\n    if ((categories === null || categories === void 0 ? void 0 : categories.length) && product) {\n      let foundCategory = categories.find(item => item.name === product.Kategorija);\n\n      if (foundCategory && (foundCategory === null || foundCategory === void 0 ? void 0 : foundCategory.discount) && foundCategory.discount < 0) {\n        setHesAction(true);\n      } else {\n        setHesAction(false);\n      }\n    }\n  }, [categories, product]);\n\n  const submitHandler = e => {\n    e.preventDefault(); // dispatch actions\n\n    dispatch(saveProductReview(props.match.params.id, {\n      name: userInfo.name,\n      rating: rating,\n      comment: comment\n    }));\n  };\n\n  const handleAddToCart = () => {\n    dispatch(addToCart(product._id, qty));\n    props.history.push('/cart/');\n  };\n\n  const goBack = () => {\n    props.history.goBack();\n    console.log(window.history);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"back-to-result\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    onClick: e => goBack(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, \"Nazad\")), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, \"Loading...\") : error ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, error, \" \") : /*#__PURE__*/React.createElement(React.Fragment, null, (product === null || product === void 0 ? void 0 : product.ID) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details-image col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"img-fluid\",\n    src: product.Slika,\n    alt: \"product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }), hasAction ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 27\n    }\n  }, \"Akcijska cena\") : ''), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details-info col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 19\n    }\n  }, product.Naziv)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, \"Cena: \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  }, product.Cena, \" rsd\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, \"Kategorija:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 19\n    }\n  }, product.Kategorija)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, \"Proizvodjac:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }, product.Proizvodjac)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"Sezona:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }, product.Sezona)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, \"Sirina:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 19\n    }\n  }, product.Sirina)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, \"Visina:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 19\n    }\n  }, product.Visina)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, \"Precnik:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }\n  }, product.Precnik)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, \"Opis:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 19\n    }\n  }, product.Specifikacija)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details-action col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, \"Cena: \", product.Cena, \" rsd\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }, \"Status:\", ' ', product.Lager > 0 ? 'Na stanju' : 'Nema na stanju.'), product.Lager > 0 ? /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 38\n    }\n  }, \"Kolicina:\", ' ', /*#__PURE__*/React.createElement(\"select\", {\n    value: qty,\n    onChange: e => {\n      setQty(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 20\n    }\n  }, Array.from(Array(product.Lager).keys()).map(x => /*#__PURE__*/React.createElement(\"option\", {\n    key: x + 1,\n    value: x + 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }, x + 1)))) : '', /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, product.Lager > 0 && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleAddToCart,\n    className: \"button primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 23\n    }\n  }, \"Dodaj u Korpu\"))))) : ''));\n}\n\nexport default ProductScreen;","map":{"version":3,"sources":["D:/project/gume/novomak-export/frontend/src/screens/ProductScreen.js"],"names":["React","useEffect","useState","Link","useHistory","useSelector","useDispatch","detailsProduct","saveProductReview","Rating","PRODUCT_REVIEW_SAVE_RESET","addToCart","ProductScreen","props","qty","setQty","rating","setRating","comment","setComment","userSignin","state","userInfo","productDetails","product","loading","error","productReviewSave","success","productSaveSuccess","categories","categoryList","hasAction","setHesAction","dispatch","history","alert","type","options","behavior","setTimeout","document","getElementsByClassName","scrollIntoView","match","params","id","length","foundCategory","find","item","name","Kategorija","discount","submitHandler","e","preventDefault","handleAddToCart","_id","push","goBack","console","log","window","ID","Slika","Naziv","Cena","Proizvodjac","Sezona","Sirina","Visina","Precnik","Specifikacija","Lager","target","value","Array","from","keys","map","x"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { detailsProduct, saveProductReview } from '../actions/productActions';\r\nimport Rating from '../components/Rating';\r\nimport { PRODUCT_REVIEW_SAVE_RESET } from '../constants/productConstants';\r\nimport {addToCart} from \"../actions/cartActions\";\r\n\r\nfunction ProductScreen(props) {\r\n  const [qty, setQty] = useState(1);\r\n  const [rating, setRating] = useState(0);\r\n  const [comment, setComment] = useState('');\r\n  const userSignin = useSelector((state) => state.userSignin);\r\n  const { userInfo } = userSignin;\r\n  const productDetails = useSelector((state) => state.productDetails);\r\n  const { product, loading, error } = productDetails;\r\n  const productReviewSave = useSelector((state) => state.productReviewSave);\r\n  const { success: productSaveSuccess } = productReviewSave;\r\n  const {categories} = useSelector((state) => state.categoryList.categories);\r\n  const [hasAction, setHesAction] = useState(false)\r\n  const dispatch = useDispatch();\r\n  let history = useHistory();\r\n  useEffect(() => {\r\n    if (productSaveSuccess) {\r\n      alert('Review submitted successfully.');\r\n      setRating(0);\r\n      setComment('');\r\n      dispatch({ type: PRODUCT_REVIEW_SAVE_RESET });\r\n    }\r\n    let options = {\r\n      behavior: 'smooth'\r\n    }\r\n    setTimeout(() => {\r\n      document.getElementsByClassName('header')[0].scrollIntoView(options)\r\n    }, 500)\r\n    dispatch(detailsProduct(props.match.params.id));\r\n    return () => {\r\n      //\r\n    };\r\n  }, [productSaveSuccess]);\r\n  useEffect(() => {\r\n    if (categories?.length && product) {\r\n      let foundCategory = categories.find(item => item.name === product.Kategorija);\r\n      if (foundCategory && foundCategory?.discount && foundCategory.discount < 0) {\r\n        setHesAction(true)\r\n      } else {\r\n        setHesAction(false)\r\n      }\r\n    }\r\n\r\n  }, [categories, product])\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    // dispatch actions\r\n    dispatch(\r\n      saveProductReview(props.match.params.id, {\r\n        name: userInfo.name,\r\n        rating: rating,\r\n        comment: comment,\r\n      })\r\n    );\r\n  };\r\n  const handleAddToCart = () => {\r\n    dispatch(addToCart(product._id, qty));\r\n    props.history.push('/cart/');\r\n  };\r\n  const goBack = () => {\r\n    props.history.goBack();\r\n    console.log(window.history);\r\n  };\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"back-to-result\">\r\n        <p onClick={e => goBack()}>Nazad</p>\r\n      </div>\r\n      {loading ? (\r\n        <div>Loading...</div>\r\n      ) : error ? (\r\n        <div>{error} </div>\r\n      ) : (\r\n        <>\r\n          {product?.ID ? <div className=\"details row\">\r\n            <div className=\"details-image col-md-4\">\r\n              <img className=\"img-fluid\" src={product.Slika} alt=\"product\"></img>\r\n              {hasAction ?<div className=\"action\">Akcijska cena</div>: ''}\r\n            </div>\r\n            <div className=\"details-info col-md-4\">\r\n              <ul>\r\n                <li>\r\n                  <h2>{product.Naziv}</h2>\r\n                </li>\r\n                <li>\r\n                  Cena: <b>{product.Cena} rsd</b>\r\n                </li>\r\n                <li>\r\n                  Kategorija:\r\n                  <span>{product.Kategorija}</span>\r\n                </li>\r\n                <li>\r\n                  Proizvodjac:\r\n                  <span>{product.Proizvodjac}</span>\r\n                </li>\r\n                <li>\r\n                  Sezona:\r\n                  <span>{product.Sezona}</span>\r\n                </li>\r\n                <li>\r\n                  Sirina:\r\n                  <span>{product.Sirina}</span>\r\n                </li>\r\n                <li>\r\n                  Visina:\r\n                  <span>{product.Visina}</span>\r\n                </li>\r\n                <li>\r\n                  Precnik:\r\n                  <span>{product.Precnik}</span>\r\n                </li>\r\n                <li>\r\n                  Opis:\r\n                  <span>{product.Specifikacija}</span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"details-action col-md-4\">\r\n              <ul>\r\n                <li>Cena: {product.Cena} rsd</li>\r\n                <li>\r\n                  Status:{' '}\r\n                  {product.Lager > 0 ? 'Na stanju' : 'Nema na stanju.'}\r\n                </li>\r\n                {product.Lager > 0 ? <li>\r\n                  Kolicina:{' '}\r\n                   <select\r\n                      value={qty}\r\n                      onChange={(e) => {\r\n                        setQty(e.target.value);\r\n                      }}\r\n                  >\r\n                    {Array.from(Array(product.Lager).keys()).map((x) => (\r\n                        <option key={x + 1} value={x + 1}>\r\n                          {x + 1}\r\n                        </option>\r\n                    ))}\r\n                  </select>\r\n                </li> : ''}\r\n                <li>\r\n                  {product.Lager > 0 && (\r\n                      <button\r\n                          onClick={handleAddToCart}\r\n                          className=\"button primary\"\r\n                      >\r\n                        Dodaj u Korpu\r\n                      </button>\r\n                  )}\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div> : ''}\r\n\r\n          {/*<div className=\"content-margined\">*/}\r\n          {/*  <h2>Reviews</h2>*/}\r\n          {/*  {!product.reviews.length && <div>There is no review</div>}*/}\r\n          {/*  <ul className=\"review\" id=\"reviews\">*/}\r\n          {/*    {product.reviews.map((review) => (*/}\r\n          {/*      <li key={review._id}>*/}\r\n          {/*        <div>{review.name}</div>*/}\r\n          {/*        <div>*/}\r\n          {/*          <Rating value={review.rating}></Rating>*/}\r\n          {/*        </div>*/}\r\n          {/*        <div>{review.createdAt.substring(0, 10)}</div>*/}\r\n          {/*        <div>{review.comment}</div>*/}\r\n          {/*      </li>*/}\r\n          {/*    ))}*/}\r\n          {/*    <li>*/}\r\n          {/*      <h3>Write a customer review</h3>*/}\r\n          {/*      {userInfo ? (*/}\r\n          {/*        <form onSubmit={submitHandler}>*/}\r\n          {/*          <ul className=\"form-container\">*/}\r\n          {/*            <li>*/}\r\n          {/*              <label htmlFor=\"rating\">Rating</label>*/}\r\n          {/*              <select*/}\r\n          {/*                name=\"rating\"*/}\r\n          {/*                id=\"rating\"*/}\r\n          {/*                value={rating}*/}\r\n          {/*                onChange={(e) => setRating(e.target.value)}*/}\r\n          {/*              >*/}\r\n          {/*                <option value=\"1\">1- Poor</option>*/}\r\n          {/*                <option value=\"2\">2- Fair</option>*/}\r\n          {/*                <option value=\"3\">3- Good</option>*/}\r\n          {/*                <option value=\"4\">4- Very Good</option>*/}\r\n          {/*                <option value=\"5\">5- Excelent</option>*/}\r\n          {/*              </select>*/}\r\n          {/*            </li>*/}\r\n          {/*            <li>*/}\r\n          {/*              <label htmlFor=\"comment\">Comment</label>*/}\r\n          {/*              <textarea*/}\r\n          {/*                name=\"comment\"*/}\r\n          {/*                value={comment}*/}\r\n          {/*                onChange={(e) => setComment(e.target.value)}*/}\r\n          {/*              ></textarea>*/}\r\n          {/*            </li>*/}\r\n          {/*            <li>*/}\r\n          {/*              <button type=\"submit\" className=\"button primary\">*/}\r\n          {/*                Submit*/}\r\n          {/*              </button>*/}\r\n          {/*            </li>*/}\r\n          {/*          </ul>*/}\r\n          {/*        </form>*/}\r\n          {/*      ) : (*/}\r\n          {/*        <div>*/}\r\n          {/*          Please <Link to=\"/signin\">Sign-in</Link> to write a review.*/}\r\n          {/*        </div>*/}\r\n          {/*      )}*/}\r\n          {/*    </li>*/}\r\n          {/*  </ul>*/}\r\n          {/*</div>*/}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\nexport default ProductScreen;\r\n"]},"metadata":{},"sourceType":"module"}