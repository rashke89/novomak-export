{"ast":null,"code":"var _jsxFileName = \"/Users/radosmijatovic/projects/novomak-export/frontend/src/screens/ClientsScreen.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios, { AxiosInstance as Axios } from 'axios';\nimport { saveProduct, listProducts, deleteProdcut } from '../actions/productActions';\nimport { deleteCategory, listCategories, saveCategory } from \"../actions/categoryAction\";\nimport { CATEGORY_SAVE_REQUEST } from \"../constants/categoryConstants\";\n\nfunction ClientsScreen(props) {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [id, setId] = useState('');\n  const [text, setText] = useState('');\n  const [image, setImage] = useState('');\n  const [link, setLink] = useState('');\n  const [headers, setHeaders] = useState([]);\n  const [selectedHeader, setSelectedHeader] = useState([]);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    // if (successSave) {\n    //     setModalVisible(false);\n    // }\n    listClients();\n    return () => {//\n    };\n  }, []);\n\n  const listClients = () => {\n    axios.get(`/api/users/client`).then(data => {\n      setHeaders(data.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const openModal = product => {\n    setText(product.text);\n    setImage(product.image);\n    setId(product._id);\n    setLink(product.link);\n  };\n\n  const uploadFileHandler = e => {\n    const file = e.target.files[0];\n    const bodyFormData = new FormData();\n    bodyFormData.append('image', file);\n    axios.post('/api/uploads/client', bodyFormData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(response => {\n      setImage(response.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    let headerBody = {\n      text,\n      id,\n      image,\n      link\n    };\n    axios.post(`/api/users/client`, headerBody).then(data => {\n      document.querySelector(\".close\").click();\n      listClients();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const deleteHandler = product => {\n    axios.delete(`/api/users/client/${product._id}`).then(data => {\n      listClients();\n    }).catch(error => {\n      console.log('greska u brisanju headera', error);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content content-margined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-header mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, \"Proizvo\\u0111a\\u010Di\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#exampleModal\",\n    onClick: e => openModal({\n      text: '',\n      _id: '',\n      link: '',\n      image: ''\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, \"Kreiraj proizvodjaca\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal fade bd-example-modal-lg headers-modal\",\n    id: \"exampleModal\",\n    tabIndex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog\",\n    role: \"document\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"modal-title\",\n    id: \"exampleModalLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }, id ? 'Izmeni' : 'Kreiraj', \" proizvodjaca\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 33\n    }\n  }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `col-md-6`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 45\n    }\n  }, \"Naziv\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    value: text,\n    id: \"name\",\n    onChange: e => setText(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 45\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 45\n    }\n  }, \"Slika\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"image\",\n    value: image,\n    id: \"image\",\n    onChange: e => setImage(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"w-100\",\n    onChange: uploadFileHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 45\n    }\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    id: \"close-modal-btn\",\n    \"data-dismiss\": \"modal\",\n    onClick: e => {\n      dispatch({\n        type: CATEGORY_SAVE_REQUEST,\n        payload: ''\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 29\n    }\n  }, \"Odustani\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    onClick: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 29\n    }\n  }, id ? 'Izmeni' : 'Kreiraj'))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-list headers-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  }, \"Ime\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 25\n    }\n  }, \"Slika\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 21\n    }\n  }, headers === null || headers === void 0 ? void 0 : headers.map(product => /*#__PURE__*/React.createElement(\"tr\", {\n    key: product._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 29\n    }\n  }, product.text), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `${product.image}`,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#exampleModal\",\n    className: \"button\",\n    onClick: () => openModal(product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 33\n    }\n  }, \"Izmeni\"), headers.length > 1 ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button\",\n    onClick: () => deleteHandler(product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 56\n    }\n  }, \"Obrisi\") : '')))))));\n}\n\nexport default ClientsScreen;","map":{"version":3,"sources":["/Users/radosmijatovic/projects/novomak-export/frontend/src/screens/ClientsScreen.js"],"names":["React","useEffect","useState","useSelector","useDispatch","axios","AxiosInstance","Axios","saveProduct","listProducts","deleteProdcut","deleteCategory","listCategories","saveCategory","CATEGORY_SAVE_REQUEST","ClientsScreen","props","modalVisible","setModalVisible","id","setId","text","setText","image","setImage","link","setLink","headers","setHeaders","selectedHeader","setSelectedHeader","dispatch","listClients","get","then","data","catch","error","console","log","openModal","product","_id","uploadFileHandler","e","file","target","files","bodyFormData","FormData","append","post","response","err","submitHandler","preventDefault","headerBody","document","querySelector","click","deleteHandler","delete","value","type","payload","map","length"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\nimport axios, {AxiosInstance as Axios} from 'axios';\nimport {\n    saveProduct,\n    listProducts,\n    deleteProdcut,\n} from '../actions/productActions';\nimport {deleteCategory, listCategories, saveCategory} from \"../actions/categoryAction\";\nimport {CATEGORY_SAVE_REQUEST} from \"../constants/categoryConstants\";\n\nfunction ClientsScreen(props) {\n    const [modalVisible, setModalVisible] = useState(false);\n    const [id, setId] = useState('');\n    const [text, setText] = useState('');\n    const [image, setImage] = useState('');\n    const [link, setLink] = useState('');\n    const [headers, setHeaders] = useState([]);\n    const [selectedHeader, setSelectedHeader] = useState([]);\n    const dispatch = useDispatch();\n    useEffect(() => {\n        // if (successSave) {\n        //     setModalVisible(false);\n        // }\n        listClients()\n        return () => {\n            //\n        };\n    }, []);\n\n    const listClients = () => {\n        axios.get(`/api/users/client`)\n            .then(data => {\n                setHeaders(data.data)\n            })\n            .catch(error => {\n                console.log(error);\n            })\n    };\n    const openModal = (product) => {\n        setText(product.text);\n        setImage(product.image);\n        setId(product._id);\n        setLink(product.link);\n    };\n    const uploadFileHandler = (e) => {\n        const file = e.target.files[0];\n        const bodyFormData = new FormData();\n        bodyFormData.append('image', file);\n        axios\n            .post('/api/uploads/client', bodyFormData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                },\n            })\n            .then((response) => {\n                setImage(response.data);\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    };\n    const submitHandler = (e) => {\n        e.preventDefault();\n        let headerBody = {text, id, image, link};\n        axios.post(`/api/users/client`, headerBody)\n            .then(data => {\n                document.querySelector(\".close\").click();\n                listClients()\n            })\n            .catch(error => {\n                console.log(error);\n            })\n    };\n    const deleteHandler = (product) => {\n        axios.delete(`/api/users/client/${product._id}`)\n            .then(data => {\n                listClients();\n            })\n            .catch(error => {\n                console.log('greska u brisanju headera', error);\n            })\n    };\n\n    return (\n        <div className=\"content content-margined\">\n            <div className=\"product-header mb-4\">\n                <h3>Proizvođači</h3>\n                <button type=\"button\" className=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#exampleModal\" onClick={e => openModal({text: '', _id: '', link: '', image: ''})}>\n                    Kreiraj proizvodjaca\n                </button>\n            </div>\n\n            <div className=\"modal fade bd-example-modal-lg headers-modal\" id=\"exampleModal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                <div className=\"modal-dialog\" role=\"document\">\n                    <div className=\"modal-content\">\n                        <div className=\"modal-header\">\n                            <h2 className=\"modal-title\" id=\"exampleModalLabel\">{id ? 'Izmeni' : 'Kreiraj'} proizvodjaca</h2>\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                            <div className=\"form-modal\">\n                                <form onSubmit={submitHandler}>\n                                    <div className=\"row\">\n                                        <div className={`col-md-6`}>\n                                            <label htmlFor=\"name\">Naziv</label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"name\"\n                                                value={text}\n                                                id=\"name\"\n                                                onChange={(e) => setText(e.target.value)}\n                                            />\n\n                                        </div>\n                                        {/*<div className=\"col-md-6\">*/}\n                                        {/*    <label htmlFor=\"link\">Dugme link</label>*/}\n                                        {/*    <input*/}\n                                        {/*        type=\"text\"*/}\n                                        {/*        name=\"link\"*/}\n                                        {/*        value={link}*/}\n                                        {/*        id=\"link\"*/}\n                                        {/*        onChange={(e) => setLink(e.target.value)}*/}\n                                        {/*    ></input>*/}\n                                        {/*</div>*/}\n                                        <div className=\"col-md-6\">\n                                            <label htmlFor=\"image\">Slika</label>\n                                            <input\n                                                type=\"text\"\n                                                name=\"image\"\n                                                value={image}\n                                                id=\"image\"\n                                                onChange={(e) => setImage(e.target.value)}\n                                            ></input>\n                                            <input type=\"file\"\n                                                   className=\"w-100\"\n                                                   onChange={uploadFileHandler}></input>\n                                        </div>\n                                        {/*<div className=\"col-md-12\">*/}\n                                        {/*    {categorySave && categorySave.hasOwnProperty('loading') && !categorySave.loading && <div className=\"col-md-12 mt-3\">*/}\n                                        {/*        <p className={!categorySave?.success ? 'error-text p-3' : 'success-text p-3'}>*/}\n                                        {/*            [STATUS] {id ? 'izmena' : 'kreiranje'} kategorije: {categorySave?.category?.message}*/}\n                                        {/*        </p>*/}\n                                        {/*    </div>}*/}\n                                        {/*</div>*/}\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                        <div className=\"modal-footer\">\n                            <button type=\"button\" className=\"btn btn-secondary\" id=\"close-modal-btn\" data-dismiss=\"modal\" onClick={e => {\n                                dispatch({type: CATEGORY_SAVE_REQUEST, payload: ''});\n                            }}>Odustani</button>\n                            <button type=\"submit\" className=\"btn btn-primary\" onClick={submitHandler}>\n                                {id ? 'Izmeni' : 'Kreiraj'}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {<div className=\"product-list headers-list\">\n                <table className=\"table\">\n                    <thead>\n                    <tr>\n                        <th>Ime</th>\n                        <th>Slika</th>\n                        <th></th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {headers?.map((product) => (\n                        <tr key={product._id}>\n                            <td>{product.text}</td>\n                            <td>\n                                <img src={`${product.image}`} alt=\"\"/>\n                            </td>\n                            <td>\n                                <button type=\"button\" data-toggle=\"modal\" data-target=\"#exampleModal\" className=\"button\" onClick={() => openModal(product)}>\n                                    Izmeni\n                                </button>\n                                { headers.length > 1 ? <button\n                                    className=\"button\"\n                                    onClick={() => deleteHandler(product)}\n                                >\n                                    Obrisi\n                                </button> : ''}\n                            </td>\n                        </tr>\n                    ))}\n                    </tbody>\n                </table>\n            </div>}\n        </div>\n    );\n}\n\nexport default ClientsScreen;\n"]},"metadata":{},"sourceType":"module"}