{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\gume\\\\novomak-export\\\\frontend\\\\src\\\\screens\\\\ProfileScreen.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { logout, update } from '../actions/userActions';\nimport { deleteOrder, listMyOrders } from '../actions/orderActions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { listProducts } from \"../actions/productActions\";\nimport Pagination from \"react-js-pagination\";\n\nfunction ProfileScreen(props) {\n  const [name, setName] = useState('');\n  const [password, setPassword] = useState('');\n  const [email, setEmail] = useState('');\n  const dispatch = useDispatch();\n  const userSignin = useSelector(state => state.userSignin);\n  const {\n    userInfo\n  } = userSignin;\n  const userUpdate = useSelector(state => state.userUpdate);\n  const {\n    loading,\n    success,\n    error\n  } = userUpdate;\n  const [page, setPage] = useState(1);\n  const [searchKeyword, setSearchKeyword] = useState('');\n  const myOrderList = useSelector(state => {\n    return state.myOrderList;\n  });\n  const [totalPerPage, setTotalPerPage] = useState(30);\n  const {\n    loading: loadingOrders,\n    orders: orders,\n    error: errorOrders,\n    totalItems\n  } = myOrderList;\n  useEffect(() => {\n    if (userInfo) {\n      setEmail(userInfo.email);\n      setName(userInfo.name);\n      setPassword(userInfo.password);\n    }\n\n    dispatch(listMyOrders(page, searchKeyword));\n    return () => {};\n  }, [userInfo]);\n\n  const handleLogout = () => {\n    dispatch(logout());\n    props.history.push(\"/signin\");\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(update({\n      userId: userInfo._id,\n      email,\n      name,\n      password\n    }));\n  };\n\n  const handlePagination = num => {\n    setPage(num);\n    dispatch(listMyOrders(num, searchKeyword));\n  };\n\n  const deleteHandler = order => {\n    dispatch(deleteOrder(order._id));\n    dispatch(listMyOrders(page, searchKeyword));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-orders content-margined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, loadingOrders ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 33\n    }\n  }, \"Loading...\") : errorOrders ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 35\n    }\n  }, errorOrders, \" \") : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"head-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 29\n    }\n  }, \"Porudzbine\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: searchKeyword,\n    type: \"text\",\n    id: \"search\",\n    name: \"search\",\n    placeholder: \"Pretraga (ID ili ime/prezime kupca)\",\n    onKeyDown: e => {\n      if (e.keyCode == 13) {\n        handlePagination(page);\n      }\n    },\n    onChange: e => setSearchKeyword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 37\n    }\n  }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 37\n    }\n  }, \"Datum\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 37\n    }\n  }, \"Kupac\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 37\n    }\n  }, \"Ukupna cena\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 37\n    }\n  }, \"Detalji\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 33\n    }\n  }, orders.map(order => {\n    var _order$user, _order$user2;\n\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: order._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 54\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 37\n      }\n    }, order._id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 37\n      }\n    }, new Date(order.createdAt).toLocaleString()), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 37\n      }\n    }, (_order$user = order.user) === null || _order$user === void 0 ? void 0 : _order$user.name, \" \", order === null || order === void 0 ? void 0 : (_order$user2 = order.user) === null || _order$user2 === void 0 ? void 0 : _order$user2.lastName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 37\n      }\n    }, order.priceSum, \" rsd\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/order/\" + order._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 41\n      }\n    }, \"DETALJI\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => deleteHandler(order),\n      className: \"button secondary ml-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 41\n      }\n    }, \"Delete\")));\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pagination-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, totalItems && /*#__PURE__*/React.createElement(Pagination, {\n    activePage: page,\n    itemsCountPerPage: totalPerPage,\n    totalItemsCount: totalItems,\n    pageRangeDisplayed: 5,\n    onChange: handlePagination,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 40\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"form-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 29\n    }\n  }, \"User Profile\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 25\n    }\n  }, loading && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 41\n    }\n  }, \"Loading...\"), error && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 39\n    }\n  }, error), success && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 41\n    }\n  }, \"Profile Saved Successfully.\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 29\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: name,\n    type: \"name\",\n    name: \"name\",\n    id: \"name\",\n    onChange: e => setName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: email,\n    type: \"email\",\n    name: \"email\",\n    id: \"email\",\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 29\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: password,\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"button primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 29\n    }\n  }, \"Update\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleLogout,\n    className: \"button secondary full-width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 29\n    }\n  }, \"Logout\")))))));\n}\n\nexport default ProfileScreen;","map":{"version":3,"sources":["D:/project/gume/novomak-export/frontend/src/screens/ProfileScreen.js"],"names":["React","useState","useEffect","Link","logout","update","deleteOrder","listMyOrders","useDispatch","useSelector","listProducts","Pagination","ProfileScreen","props","name","setName","password","setPassword","email","setEmail","dispatch","userSignin","state","userInfo","userUpdate","loading","success","error","page","setPage","searchKeyword","setSearchKeyword","myOrderList","totalPerPage","setTotalPerPage","loadingOrders","orders","errorOrders","totalItems","handleLogout","history","push","submitHandler","e","preventDefault","userId","_id","handlePagination","num","deleteHandler","order","keyCode","target","value","map","Date","createdAt","toLocaleString","user","lastName","priceSum"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {logout, update} from '../actions/userActions';\r\nimport {deleteOrder, listMyOrders} from '../actions/orderActions';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {listProducts} from \"../actions/productActions\";\r\nimport Pagination from \"react-js-pagination\";\r\n\r\nfunction ProfileScreen(props) {\r\n    const [name, setName] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const dispatch = useDispatch();\r\n\r\n    const userSignin = useSelector(state => state.userSignin);\r\n    const {userInfo} = userSignin;\r\n\r\n    const userUpdate = useSelector(state => state.userUpdate);\r\n    const {loading, success, error} = userUpdate;\r\n    const [page, setPage] = useState(1);\r\n    const [searchKeyword, setSearchKeyword] = useState('');\r\n    const myOrderList = useSelector(state => {\r\n        return state.myOrderList\r\n    });\r\n    const [totalPerPage, setTotalPerPage] = useState(30);\r\n    const {loading: loadingOrders, orders: orders, error: errorOrders, totalItems} = myOrderList;\r\n\r\n    useEffect(() => {\r\n        if (userInfo) {\r\n            setEmail(userInfo.email);\r\n            setName(userInfo.name);\r\n            setPassword(userInfo.password);\r\n        }\r\n        dispatch(listMyOrders(page, searchKeyword));\r\n        return () => {\r\n\r\n        };\r\n    }, [userInfo]);\r\n    const handleLogout = () => {\r\n        dispatch(logout());\r\n        props.history.push(\"/signin\");\r\n    };\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n        dispatch(update({userId: userInfo._id, email, name, password}))\r\n    };\r\n    const handlePagination = (num) => {\r\n        setPage(num);\r\n        dispatch(listMyOrders(num, searchKeyword));\r\n    };\r\n    const deleteHandler = (order) => {\r\n        dispatch(deleteOrder(order._id));\r\n        dispatch(listMyOrders(page, searchKeyword));\r\n    }\r\n\r\n    return <div className=\"profile\">\r\n        <div className=\"profile-orders content-margined\">\r\n            {\r\n                loadingOrders ? <div>Loading...</div> :\r\n                    errorOrders ? <div>{errorOrders} </div> :\r\n                        <>\r\n                          <div className=\"head-section\">\r\n                            <h3>Porudzbine</h3>\r\n                            <input value={searchKeyword}\r\n                                   type=\"text\"\r\n                                   id=\"search\"\r\n                                   name=\"search\"\r\n                                   placeholder=\"Pretraga (ID ili ime/prezime kupca)\"\r\n                                   onKeyDown={e => {\r\n                                     if(e.keyCode == 13){\r\n                                       handlePagination(page)\r\n                                     }\r\n                                   }}\r\n                                   onChange={(e) => setSearchKeyword(e.target.value)}>\r\n                            </input>\r\n                          </div>\r\n                            <table className=\"table\">\r\n                                <thead>\r\n                                <tr>\r\n                                    <th>ID</th>\r\n                                    <th>Datum</th>\r\n                                    <th>Kupac</th>\r\n                                    <th>Ukupna cena</th>\r\n                                    <th>Detalji</th>\r\n                                </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                {orders.map(order => <tr key={order._id}>\r\n                                    <td>{order._id}</td>\r\n                                    <td>{new Date(order.createdAt).toLocaleString()}</td>\r\n                                    <td>{order.user?.name} {order?.user?.lastName}</td>\r\n                                    <td>{order.priceSum} rsd</td>\r\n                                    <td>\r\n                                        <Link to={\"/order/\" + order._id}>DETALJI</Link>\r\n                                        <button type=\"button\" onClick={() => deleteHandler(order)} className=\"button secondary ml-3\">Delete</button>\r\n                                    </td>\r\n                                </tr>)}\r\n                                </tbody>\r\n                            </table>\r\n                        </>\r\n            }\r\n            <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                    <div className=\"pagination-wrapper\">\r\n                        {totalItems && <Pagination\r\n                            activePage={page}\r\n                            itemsCountPerPage={totalPerPage}\r\n                            totalItemsCount={totalItems}\r\n                            pageRangeDisplayed={5}\r\n                            onChange={handlePagination}\r\n                        />}\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div className=\"profile-info\">\r\n            <div className=\"form\">\r\n                <form onSubmit={submitHandler}>\r\n                    <ul className=\"form-container\">\r\n                        <li>\r\n                            <h2>User Profile</h2>\r\n                        </li>\r\n                        <li>\r\n                            {loading && <div>Loading...</div>}\r\n                            {error && <div>{error}</div>}\r\n                            {success && <div>Profile Saved Successfully.</div>}\r\n                        </li>\r\n                        <li>\r\n                            <label htmlFor=\"name\">\r\n                                Name\r\n                            </label>\r\n                            <input value={name} type=\"name\" name=\"name\" id=\"name\" onChange={(e) => setName(e.target.value)}>\r\n                            </input>\r\n                        </li>\r\n                        <li>\r\n                            <label htmlFor=\"email\">\r\n                                Email\r\n                            </label>\r\n                            <input value={email} type=\"email\" name=\"email\" id=\"email\" onChange={(e) => setEmail(e.target.value)}>\r\n                            </input>\r\n                        </li>\r\n                        <li>\r\n                            <label htmlFor=\"password\">Password</label>\r\n                            <input value={password} type=\"password\" id=\"password\" name=\"password\" onChange={(e) => setPassword(e.target.value)}>\r\n                            </input>\r\n                        </li>\r\n\r\n                        <li>\r\n                            <button type=\"submit\" className=\"button primary\">Update</button>\r\n                        </li>\r\n                        <li>\r\n                            <button type=\"button\" onClick={handleLogout} className=\"button secondary full-width\">Logout</button>\r\n                        </li>\r\n\r\n                    </ul>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default ProfileScreen;"]},"metadata":{},"sourceType":"module"}