{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\gume\\\\novomak-export\\\\frontend\\\\src\\\\screens\\\\ClientsScreen.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios, { AxiosInstance as Axios } from 'axios';\nimport { saveProduct, listProducts, deleteProdcut } from '../actions/productActions';\nimport { deleteCategory, listCategories, saveCategory } from \"../actions/categoryAction\";\nimport { CATEGORY_SAVE_REQUEST } from \"../constants/categoryConstants\";\nimport * as config from \"../config\";\n\nfunction ClientsScreen(props) {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [id, setId] = useState('');\n  const [text, setText] = useState('');\n  const [image, setImage] = useState('');\n  const [link, setLink] = useState('');\n  const [headers, setHeaders] = useState([]);\n  const [selectedHeader, setSelectedHeader] = useState([]);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    // if (successSave) {\n    //     setModalVisible(false);\n    // }\n    listClients();\n    return () => {//\n    };\n  }, []);\n\n  const listClients = () => {\n    axios.get(`/api/users/client`).then(data => {\n      setHeaders(data.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const openModal = product => {\n    setText(product.text);\n    setImage(product.image);\n    setId(product._id);\n    setLink(product.link);\n  };\n\n  const uploadFileHandler = e => {\n    const file = e.target.files[0];\n    const bodyFormData = new FormData();\n    bodyFormData.append('image', file);\n    axios.post('/api/uploads/client', bodyFormData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(response => {\n      setImage(response.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    let headerBody = {\n      text,\n      id,\n      image,\n      link\n    };\n    axios.post(`/api/users/client`, headerBody).then(data => {\n      document.querySelector(\".close\").click();\n      listClients();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const deleteHandler = product => {\n    axios.delete(`/api/users/client/${product._id}`).then(data => {\n      listClients();\n    }).catch(error => {\n      console.log('greska u brisanju headera', error);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content content-margined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-header mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, \"Proizvo\\u0111a\\u010Di\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#exampleModal\",\n    onClick: e => openModal({\n      text: '',\n      _id: '',\n      link: '',\n      image: ''\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, \"Kreiraj proizvodjaca\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal fade bd-example-modal-lg headers-modal\",\n    id: \"exampleModal\",\n    tabIndex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog\",\n    role: \"document\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"modal-title\",\n    id: \"exampleModalLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }, id ? 'Izmeni' : 'Kreiraj', \" proizvo\\u0111a\\u010Da\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 33\n    }\n  }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `col-md-6`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 45\n    }\n  }, \"Naziv\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    value: text,\n    id: \"name\",\n    onChange: e => setText(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 45\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 45\n    }\n  }, \"Slika\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"image\",\n    value: image,\n    id: \"image\",\n    onChange: e => setImage(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"w-100\",\n    onChange: uploadFileHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 45\n    }\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    id: \"close-modal-btn\",\n    \"data-dismiss\": \"modal\",\n    onClick: e => {\n      dispatch({\n        type: CATEGORY_SAVE_REQUEST,\n        payload: ''\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 29\n    }\n  }, \"Odustani\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    onClick: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 29\n    }\n  }, id ? 'Izmeni' : 'Kreiraj'))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-list headers-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 25\n    }\n  }, \"Ime\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 25\n    }\n  }, \"Slika\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }, headers === null || headers === void 0 ? void 0 : headers.map(product => /*#__PURE__*/React.createElement(\"tr\", {\n    key: product._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 29\n    }\n  }, product.text), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `${config.formatImagePath(product.image)}`,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#exampleModal\",\n    className: \"button\",\n    onClick: () => openModal(product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 33\n    }\n  }, \"Izmeni\"), headers.length > 1 ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button\",\n    onClick: () => deleteHandler(product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 56\n    }\n  }, \"Obrisi\") : '')))))));\n}\n\nexport default ClientsScreen;","map":{"version":3,"sources":["D:/project/gume/novomak-export/frontend/src/screens/ClientsScreen.js"],"names":["React","useEffect","useState","useSelector","useDispatch","axios","AxiosInstance","Axios","saveProduct","listProducts","deleteProdcut","deleteCategory","listCategories","saveCategory","CATEGORY_SAVE_REQUEST","config","ClientsScreen","props","modalVisible","setModalVisible","id","setId","text","setText","image","setImage","link","setLink","headers","setHeaders","selectedHeader","setSelectedHeader","dispatch","listClients","get","then","data","catch","error","console","log","openModal","product","_id","uploadFileHandler","e","file","target","files","bodyFormData","FormData","append","post","response","err","submitHandler","preventDefault","headerBody","document","querySelector","click","deleteHandler","delete","value","type","payload","map","formatImagePath","length"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {useSelector, useDispatch} from 'react-redux';\r\nimport axios, {AxiosInstance as Axios} from 'axios';\r\nimport {\r\n    saveProduct,\r\n    listProducts,\r\n    deleteProdcut,\r\n} from '../actions/productActions';\r\nimport {deleteCategory, listCategories, saveCategory} from \"../actions/categoryAction\";\r\nimport {CATEGORY_SAVE_REQUEST} from \"../constants/categoryConstants\";\r\nimport * as config from \"../config\";\r\n\r\nfunction ClientsScreen(props) {\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const [id, setId] = useState('');\r\n    const [text, setText] = useState('');\r\n    const [image, setImage] = useState('');\r\n    const [link, setLink] = useState('');\r\n    const [headers, setHeaders] = useState([]);\r\n    const [selectedHeader, setSelectedHeader] = useState([]);\r\n    const dispatch = useDispatch();\r\n    useEffect(() => {\r\n        // if (successSave) {\r\n        //     setModalVisible(false);\r\n        // }\r\n        listClients()\r\n        return () => {\r\n            //\r\n        };\r\n    }, []);\r\n\r\n    const listClients = () => {\r\n        axios.get(`/api/users/client`)\r\n            .then(data => {\r\n                setHeaders(data.data)\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            })\r\n    };\r\n    const openModal = (product) => {\r\n        setText(product.text);\r\n        setImage(product.image);\r\n        setId(product._id);\r\n        setLink(product.link);\r\n    };\r\n    const uploadFileHandler = (e) => {\r\n        const file = e.target.files[0];\r\n        const bodyFormData = new FormData();\r\n        bodyFormData.append('image', file);\r\n        axios\r\n            .post('/api/uploads/client', bodyFormData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                },\r\n            })\r\n            .then((response) => {\r\n                setImage(response.data);\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    };\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n        let headerBody = {text, id, image, link};\r\n        axios.post(`/api/users/client`, headerBody)\r\n            .then(data => {\r\n                document.querySelector(\".close\").click();\r\n                listClients()\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            })\r\n    };\r\n    const deleteHandler = (product) => {\r\n        axios.delete(`/api/users/client/${product._id}`)\r\n            .then(data => {\r\n                listClients();\r\n            })\r\n            .catch(error => {\r\n                console.log('greska u brisanju headera', error);\r\n            })\r\n    };\r\n\r\n    return (\r\n        <div className=\"content content-margined\">\r\n            <div className=\"product-header mb-4\">\r\n                <h3>Proizvođači</h3>\r\n                <button type=\"button\" className=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#exampleModal\" onClick={e => openModal({text: '', _id: '', link: '', image: ''})}>\r\n                    Kreiraj proizvodjaca\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"modal fade bd-example-modal-lg headers-modal\" id=\"exampleModal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog\" role=\"document\">\r\n                    <div className=\"modal-content\">\r\n                        <div className=\"modal-header\">\r\n                            <h2 className=\"modal-title\" id=\"exampleModalLabel\">{id ? 'Izmeni' : 'Kreiraj'} proizvođača</h2>\r\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            <div className=\"form-modal\">\r\n                                <form onSubmit={submitHandler}>\r\n                                    <div className=\"row\">\r\n                                        <div className={`col-md-6`}>\r\n                                            <label htmlFor=\"name\">Naziv</label>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                name=\"name\"\r\n                                                value={text}\r\n                                                id=\"name\"\r\n                                                onChange={(e) => setText(e.target.value)}\r\n                                            />\r\n\r\n                                        </div>\r\n                                        {/*<div className=\"col-md-6\">*/}\r\n                                        {/*    <label htmlFor=\"link\">Dugme link</label>*/}\r\n                                        {/*    <input*/}\r\n                                        {/*        type=\"text\"*/}\r\n                                        {/*        name=\"link\"*/}\r\n                                        {/*        value={link}*/}\r\n                                        {/*        id=\"link\"*/}\r\n                                        {/*        onChange={(e) => setLink(e.target.value)}*/}\r\n                                        {/*    ></input>*/}\r\n                                        {/*</div>*/}\r\n                                        <div className=\"col-md-6\">\r\n                                            <label htmlFor=\"image\">Slika</label>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                name=\"image\"\r\n                                                value={image}\r\n                                                id=\"image\"\r\n                                                onChange={(e) => setImage(e.target.value)}\r\n                                            ></input>\r\n                                            <input type=\"file\"\r\n                                                   className=\"w-100\"\r\n                                                   onChange={uploadFileHandler}></input>\r\n                                        </div>\r\n                                        {/*<div className=\"col-md-12\">*/}\r\n                                        {/*    {categorySave && categorySave.hasOwnProperty('loading') && !categorySave.loading && <div className=\"col-md-12 mt-3\">*/}\r\n                                        {/*        <p className={!categorySave?.success ? 'error-text p-3' : 'success-text p-3'}>*/}\r\n                                        {/*            [STATUS] {id ? 'izmena' : 'kreiranje'} kategorije: {categorySave?.category?.message}*/}\r\n                                        {/*        </p>*/}\r\n                                        {/*    </div>}*/}\r\n                                        {/*</div>*/}\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <button type=\"button\" className=\"btn btn-secondary\" id=\"close-modal-btn\" data-dismiss=\"modal\" onClick={e => {\r\n                                dispatch({type: CATEGORY_SAVE_REQUEST, payload: ''});\r\n                            }}>Odustani</button>\r\n                            <button type=\"submit\" className=\"btn btn-primary\" onClick={submitHandler}>\r\n                                {id ? 'Izmeni' : 'Kreiraj'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {<div className=\"product-list headers-list\">\r\n                <table className=\"table\">\r\n                    <thead>\r\n                    <tr>\r\n                        <th>Ime</th>\r\n                        <th>Slika</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {headers?.map((product) => (\r\n                        <tr key={product._id}>\r\n                            <td>{product.text}</td>\r\n                            <td>\r\n                                <img src={`${config.formatImagePath(product.image)}`} alt=\"\"/>\r\n                            </td>\r\n                            <td>\r\n                                <button type=\"button\" data-toggle=\"modal\" data-target=\"#exampleModal\" className=\"button\" onClick={() => openModal(product)}>\r\n                                    Izmeni\r\n                                </button>\r\n                                { headers.length > 1 ? <button\r\n                                    className=\"button\"\r\n                                    onClick={() => deleteHandler(product)}\r\n                                >\r\n                                    Obrisi\r\n                                </button> : ''}\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ClientsScreen;\r\n"]},"metadata":{},"sourceType":"module"}