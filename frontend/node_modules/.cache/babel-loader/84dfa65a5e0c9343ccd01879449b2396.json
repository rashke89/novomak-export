{"ast":null,"code":"var _jsxFileName = \"/Users/radosmijatovic/projects/novomak-export/frontend/src/screens/ProductScreen.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { detailsProduct, saveProductReview } from '../actions/productActions';\nimport Rating from '../components/Rating';\nimport { PRODUCT_REVIEW_SAVE_RESET } from '../constants/productConstants';\nimport { addToCart } from \"../actions/cartActions\";\n\nfunction ProductScreen(props) {\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  const userSignin = useSelector(state => state.userSignin);\n  const {\n    userInfo\n  } = userSignin;\n  const productDetails = useSelector(state => state.productDetails);\n  const {\n    product,\n    loading,\n    error\n  } = productDetails;\n  const productReviewSave = useSelector(state => state.productReviewSave);\n  const {\n    success: productSaveSuccess\n  } = productReviewSave;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (productSaveSuccess) {\n      alert('Review submitted successfully.');\n      setRating(0);\n      setComment('');\n      dispatch({\n        type: PRODUCT_REVIEW_SAVE_RESET\n      });\n    }\n\n    dispatch(detailsProduct(props.match.params.id));\n    return () => {//\n    };\n  }, [productSaveSuccess]);\n  useEffect(() => {\n    console.log(product);\n\n    if (product && product.ID) {\n      console.log('jel udje ovde uopste');\n\n      if (!product.Lager) {\n        console.log('lager ne postoji');\n        product.Lager = 0;\n      } else if (!isNaN(product.Lager)) {\n        console.log(!isNaN(product.Lager));\n        product.Lager = product.Lager;\n      } // let unitsReg = product.Lager.match(/\\d+/);\n      //\n      // console.log(unitsReg);\n      // if (unitsReg) {\n      //   console.log(unitsReg);\n      //   product.Lager = unitsReg[0]\n      // } else {\n      //   product.Lager = 0\n      // }\n\n    }\n  }, [product.lager]);\n\n  const submitHandler = e => {\n    e.preventDefault(); // dispatch actions\n\n    dispatch(saveProductReview(props.match.params.id, {\n      name: userInfo.name,\n      rating: rating,\n      comment: comment\n    }));\n  };\n\n  const handleAddToCart = () => {\n    dispatch(addToCart(product._id, qty));\n    props.history.push('/cart/');\n  };\n\n  const checkUnits = () => {\n    console.log('jek ovo to', product, product.Lager);\n\n    if (!product.Lager) {\n      return product.Lager = 0;\n    }\n\n    console.log(isNaN(product.Lager));\n\n    if (!isNaN(product.Lager)) {\n      console.log(!isNaN(product.Lager));\n      return product.Lager;\n    }\n\n    let unitsReg = product.Lager.match(/\\d+/);\n    console.log(unitsReg);\n\n    if (unitsReg) {\n      console.log(unitsReg);\n      return product.Lager = unitsReg[0];\n    }\n\n    product.Lager = 0;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"back-to-result\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/',\n      state: {\n        comeFromProduct: true\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, \"Nazad\")), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, \"Loading...\") : error ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, error, \" \") : /*#__PURE__*/React.createElement(React.Fragment, null, (product === null || product === void 0 ? void 0 : product.ID) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details-image col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"img-fluid\",\n    src: product.Slika,\n    alt: \"product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details-info col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }\n  }, product.Naziv)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, \"Cena: \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }, product.Cena, \" rsd\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, \"Kategorija:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 19\n    }\n  }, product.Kategorija)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, \"Proizvodjac:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 19\n    }\n  }, product.Proizvodjac)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }, \"Sezona:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 19\n    }\n  }, product.Sezona)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, \"Sirina:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 19\n    }\n  }, product.Sirina)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, \"Visina:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 19\n    }\n  }, product.Visina)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, \"Precnik:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }, product.Precnik)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, \"Opis:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  }, product.Specifikacija)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details-action col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, \"Cena: \", product.Cena, \" rsd\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, \"Status:\", ' ', product.Lager > 0 ? 'Na stanju' : 'Nema na stanju.'), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, \"Kolicina:\", ' '), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, product.Lager > 0 && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleAddToCart,\n    className: \"button primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 23\n    }\n  }, \"Dodaj u Korpu\"))))) : ''));\n}\n\nexport default ProductScreen;","map":{"version":3,"sources":["/Users/radosmijatovic/projects/novomak-export/frontend/src/screens/ProductScreen.js"],"names":["React","useEffect","useState","Link","useSelector","useDispatch","detailsProduct","saveProductReview","Rating","PRODUCT_REVIEW_SAVE_RESET","addToCart","ProductScreen","props","qty","setQty","rating","setRating","comment","setComment","userSignin","state","userInfo","productDetails","product","loading","error","productReviewSave","success","productSaveSuccess","dispatch","alert","type","match","params","id","console","log","ID","Lager","isNaN","lager","submitHandler","e","preventDefault","name","handleAddToCart","_id","history","push","checkUnits","unitsReg","pathname","comeFromProduct","Slika","Naziv","Cena","Kategorija","Proizvodjac","Sezona","Sirina","Visina","Precnik","Specifikacija"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { detailsProduct, saveProductReview } from '../actions/productActions';\nimport Rating from '../components/Rating';\nimport { PRODUCT_REVIEW_SAVE_RESET } from '../constants/productConstants';\nimport {addToCart} from \"../actions/cartActions\";\n\nfunction ProductScreen(props) {\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  const userSignin = useSelector((state) => state.userSignin);\n  const { userInfo } = userSignin;\n  const productDetails = useSelector((state) => state.productDetails);\n  const { product, loading, error } = productDetails;\n  const productReviewSave = useSelector((state) => state.productReviewSave);\n  const { success: productSaveSuccess } = productReviewSave;\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (productSaveSuccess) {\n      alert('Review submitted successfully.');\n      setRating(0);\n      setComment('');\n      dispatch({ type: PRODUCT_REVIEW_SAVE_RESET });\n    }\n    dispatch(detailsProduct(props.match.params.id));\n    return () => {\n      //\n    };\n  }, [productSaveSuccess]);\n  useEffect(() => {\n    console.log(product);\n    if (product && product.ID) {\n      console.log('jel udje ovde uopste');\n      if (!product.Lager) {\n        console.log('lager ne postoji');\n         product.Lager = 0;\n      }\n\n      else if (!isNaN(product.Lager)) {\n        console.log(!isNaN(product.Lager));\n         product.Lager = product.Lager;\n\n      }\n      // let unitsReg = product.Lager.match(/\\d+/);\n      //\n      // console.log(unitsReg);\n      // if (unitsReg) {\n      //   console.log(unitsReg);\n      //   product.Lager = unitsReg[0]\n      // } else {\n      //   product.Lager = 0\n      // }\n    }\n  }, [product.lager]);\n  const submitHandler = (e) => {\n    e.preventDefault();\n    // dispatch actions\n    dispatch(\n      saveProductReview(props.match.params.id, {\n        name: userInfo.name,\n        rating: rating,\n        comment: comment,\n      })\n    );\n  };\n  const handleAddToCart = () => {\n    dispatch(addToCart(product._id, qty));\n    props.history.push('/cart/');\n  };\n\n  const checkUnits = () => {\n    console.log('jek ovo to', product, product.Lager);\n    if (!product.Lager) {\n      return product.Lager = 0;\n    }\n    console.log(isNaN(product.Lager));\n    if (!isNaN(product.Lager)) {\n      console.log(!isNaN(product.Lager));\n      return product.Lager\n    }\n    let unitsReg = product.Lager.match(/\\d+/);\n\n    console.log(unitsReg);\n    if (unitsReg) {\n      console.log(unitsReg);\n      return product.Lager = unitsReg[0]\n    }\n    product.Lager = 0\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"back-to-result\">\n        <Link to={{\n          pathname: '/',\n          state: { comeFromProduct: true }\n        }}>Nazad</Link>\n      </div>\n      {loading ? (\n        <div>Loading...</div>\n      ) : error ? (\n        <div>{error} </div>\n      ) : (\n        <>\n          {product?.ID ? <div className=\"details row\">\n            <div className=\"details-image col-md-4\">\n              <img className=\"img-fluid\" src={product.Slika} alt=\"product\"></img>\n            </div>\n            <div className=\"details-info col-md-4\">\n              <ul>\n                <li>\n                  <h2>{product.Naziv}</h2>\n                </li>\n                <li>\n                  Cena: <b>{product.Cena} rsd</b>\n                </li>\n                <li>\n                  Kategorija:\n                  <span>{product.Kategorija}</span>\n                </li>\n                <li>\n                  Proizvodjac:\n                  <span>{product.Proizvodjac}</span>\n                </li>\n                <li>\n                  Sezona:\n                  <span>{product.Sezona}</span>\n                </li>\n                <li>\n                  Sirina:\n                  <span>{product.Sirina}</span>\n                </li>\n                <li>\n                  Visina:\n                  <span>{product.Visina}</span>\n                </li>\n                <li>\n                  Precnik:\n                  <span>{product.Precnik}</span>\n                </li>\n                <li>\n                  Opis:\n                  <span>{product.Specifikacija}</span>\n                </li>\n              </ul>\n            </div>\n            <div className=\"details-action col-md-4\">\n              <ul>\n                <li>Cena: {product.Cena} rsd</li>\n                <li>\n                  Status:{' '}\n                  {product.Lager > 0 ? 'Na stanju' : 'Nema na stanju.'}\n                </li>\n                <li>\n                  Kolicina:{' '}\n                  {/*<select*/}\n                  {/*    value={qty}*/}\n                  {/*    onChange={(e) => {*/}\n                  {/*      setQty(e.target.value);*/}\n                  {/*    }}*/}\n                  {/*>*/}\n                  {/*  {Array.from(Array(product.Lager).keys()).map((x) => (*/}\n                  {/*      <option key={x + 1} value={x + 1}>*/}\n                  {/*        {x + 1}*/}\n                  {/*      </option>*/}\n                  {/*  ))}*/}\n                  {/*</select>*/}\n                </li>\n                <li>\n                  {product.Lager > 0 && (\n                      <button\n                          onClick={handleAddToCart}\n                          className=\"button primary\"\n                      >\n                        Dodaj u Korpu\n                      </button>\n                  )}\n                </li>\n              </ul>\n            </div>\n          </div> : ''}\n\n          {/*<div className=\"content-margined\">*/}\n          {/*  <h2>Reviews</h2>*/}\n          {/*  {!product.reviews.length && <div>There is no review</div>}*/}\n          {/*  <ul className=\"review\" id=\"reviews\">*/}\n          {/*    {product.reviews.map((review) => (*/}\n          {/*      <li key={review._id}>*/}\n          {/*        <div>{review.name}</div>*/}\n          {/*        <div>*/}\n          {/*          <Rating value={review.rating}></Rating>*/}\n          {/*        </div>*/}\n          {/*        <div>{review.createdAt.substring(0, 10)}</div>*/}\n          {/*        <div>{review.comment}</div>*/}\n          {/*      </li>*/}\n          {/*    ))}*/}\n          {/*    <li>*/}\n          {/*      <h3>Write a customer review</h3>*/}\n          {/*      {userInfo ? (*/}\n          {/*        <form onSubmit={submitHandler}>*/}\n          {/*          <ul className=\"form-container\">*/}\n          {/*            <li>*/}\n          {/*              <label htmlFor=\"rating\">Rating</label>*/}\n          {/*              <select*/}\n          {/*                name=\"rating\"*/}\n          {/*                id=\"rating\"*/}\n          {/*                value={rating}*/}\n          {/*                onChange={(e) => setRating(e.target.value)}*/}\n          {/*              >*/}\n          {/*                <option value=\"1\">1- Poor</option>*/}\n          {/*                <option value=\"2\">2- Fair</option>*/}\n          {/*                <option value=\"3\">3- Good</option>*/}\n          {/*                <option value=\"4\">4- Very Good</option>*/}\n          {/*                <option value=\"5\">5- Excelent</option>*/}\n          {/*              </select>*/}\n          {/*            </li>*/}\n          {/*            <li>*/}\n          {/*              <label htmlFor=\"comment\">Comment</label>*/}\n          {/*              <textarea*/}\n          {/*                name=\"comment\"*/}\n          {/*                value={comment}*/}\n          {/*                onChange={(e) => setComment(e.target.value)}*/}\n          {/*              ></textarea>*/}\n          {/*            </li>*/}\n          {/*            <li>*/}\n          {/*              <button type=\"submit\" className=\"button primary\">*/}\n          {/*                Submit*/}\n          {/*              </button>*/}\n          {/*            </li>*/}\n          {/*          </ul>*/}\n          {/*        </form>*/}\n          {/*      ) : (*/}\n          {/*        <div>*/}\n          {/*          Please <Link to=\"/signin\">Sign-in</Link> to write a review.*/}\n          {/*        </div>*/}\n          {/*      )}*/}\n          {/*    </li>*/}\n          {/*  </ul>*/}\n          {/*</div>*/}\n        </>\n      )}\n    </div>\n  );\n}\nexport default ProductScreen;\n"]},"metadata":{},"sourceType":"module"}